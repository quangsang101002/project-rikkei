<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <meta http-equiv="X-UA-Compatible" content="IE=edge">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Document</title>
  <link rel="stylesheet" href="./odermanagera.css">
  <link
  href="https://fonts.googleapis.com/css2?family=Alkatra:wght@400;500&family=Roboto:wght@300;400;500&display=swap"
  rel="stylesheet"
/>
  <script src="https://smtpjs.com/v3/smtp.js">
  </script>
  
</head>
<body>


  


 
 
    <!-- <h3>Nhập thông tin cá nhân</h3> -->
    <!-- <div class="logo">
      <img src="./image/logo-vinfast.png" alt="">
    </div> -->
    <div class="container">
      <div>
      <!-- <form action=""> -->
        <input
          type="text"
          id="name"
          name="firstname"
          placeholder="Họ và Tên"
        />
       

        <input
          type="text"
          id="infouser"
          name="lastname"
          placeholder="CMNN/CCCD"
        />

        <input
        type="text"
        id="phone"
        name="lastname"
        placeholder="Số Điện Thoại"
      />
      <input
      type="text"
      id="email"
      name="lastname"
      placeholder="Email"
    />
        </select>

        
        <button onclick="payUser()">Gửi Thông Tin</button>
      <!-- </form> -->
    </div>

      <div class="info_motorbike">
        <img src="" alt="">
        <div class="info_des">
        <h1 class="name-product"></h1>
        <h2 class="price"></h2>
        <p class="color"></p>
        </div>
       
        

      </div>
    </div>

    <script>

function payProduct() {
  const url = new URL(document.URL);
  const id = url.searchParams.get("id");
  const getProduct = JSON.parse(localStorage.getItem("product"))
  const info = document.querySelector(".info_motorbike")
  const myImg = document.querySelector("img");
  const price = document.querySelector(".price")
  const name = document.querySelector(".name-product")
  const color = document.querySelector(".color")
  const infoDes = document.querySelector(".info_des")

  getProduct.forEach(product=> {
    let iduser = product.id
  if (iduser == id) {
    myImg.src = product.image;
    info.appendChild(myImg);
    name.innerText = product.name
    price.innerText = product.price;
    color.innerText = product.description
    infoDes.appendChild(name)

    // info.insertBefore(price, null); // Chèn phần tử price vào sau phần tử ảnh
    // info.insertBefore(name, null); // Chèn phần tử price vào sau phần tử ảnh.innerText
    // info.insertBefore(color, null); // Chèn phần tử price vào sau phần tử ảnh
  }
  });


}
 payProduct()

 function payUser(id) {
  const name = document.querySelector("#name").value
  const cccd = document.querySelector("#infouser").value
  const phone = document.querySelector("#phone").value
  const email = document.querySelector("#email").value
  const price = document.querySelector(".price").innerText
  const namePd = document.querySelector(".name-product").innerText
  const color = document.querySelector(".color").innerText
 const getCtm = JSON.parse(localStorage.getItem("infoCustomer")) ?? []


 let ebody = `
 <b>Name: </b>${name}
 <br>
 <b>CCCD: </b>${cccd}
 <br>
 <b>Phone: </b>${phone}
 <br>
 <b>Email: </b>${email}
 <br>
 <b>Price: </b>${price}
 <br>
 <b>NameProduct:</b>${namePd}
 <br>
 <b>Color: </b>${color}
 <br>
 
 `

 Email.send({
    SecureToken : "4236c88c-33cd-49fb-ab6b-c6821cdb123c",
    To : 'quangsang101002@gmail.com',
    From : "quangsang101002@gmail.com",
    Subject : "mail" + email,
    Body : ebody
}).then(
  message => alert(message)
);


  const infoCustomer =
    {
      id: getCtm.length + 1,
      name:name,
      cccd:cccd,
      phone:phone,
      email:email,
      price:price,
      namePd:namePd,
      color:color
    }




  getCtm.push(infoCustomer)
    localStorage.setItem("infoCustomer", JSON.stringify(getCtm))

    window.location = "home.html";
    alert("Cảm ơn bạn đã mua hàng")
  
 }

    </script>
  </body>
</html>
